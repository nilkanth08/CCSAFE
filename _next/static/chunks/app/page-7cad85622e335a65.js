(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{32383:()=>{},32751:(e,a,t)=>{Promise.resolve().then(t.bind(t,75083))},59434:(e,a,t)=>{"use strict";t.d(a,{O:()=>n,cn:()=>l,v:()=>d});var s=t(52596),r=t(39688);function l(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.QP)((0,s.$)(a))}function n(e){let a=e.payments.reduce((e,a)=>e+a.amount,0);return e.billAmount>0&&a>=e.billAmount?"paid":a>0&&a<e.billAmount?"partially-paid":"unpaid"}function d(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",currencyDisplay:"code"}).format(e)}},75083:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>aR});var s=t(95155),r=t(12115),l=t(75074),n=t(66655),d=t(34214),i=t(6523),o=t(16923),c=t(34301),m=t(78039),u=t(66634),x=t(74466),h=t(59434);let p=(0,x.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=r.forwardRef((e,a)=>{let{className:t,variant:r,size:l,asChild:n=!1,...d}=e,i=n?u.DX:"button";return(0,s.jsx)(i,{className:(0,h.cn)(p({variant:r,size:l,className:t})),ref:a,...d})});f.displayName="Button";var j=t(64509);let g=()=>(0,s.jsx)("header",{className:"sticky top-0 z-30 flex h-16 items-center gap-4 border-b bg-background px-4 sm:px-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(j.A,{className:"h-6 w-6 text-primary"}),(0,s.jsx)("h1",{className:"text-xl font-headline font-semibold",children:"CardSafe Keeper"})]})}),b=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,h.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});b.displayName="Card";let N=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,h.cn)("flex flex-col space-y-1.5 p-6",t),...r})});N.displayName="CardHeader";let y=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,h.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});y.displayName="CardTitle";let v=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,h.cn)("text-sm text-muted-foreground",t),...r})});v.displayName="CardDescription";let w=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,h.cn)("p-6 pt-0",t),...r})});w.displayName="CardContent";let C=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,h.cn)("flex items-center p-6 pt-0",t),...r})});C.displayName="CardFooter";var D=t(91324),A=t(11133);let k=e=>{let{cards:a}=e,t=a.reduce((e,a)=>{e.totalBill+=a.billAmount;let t=a.payments.reduce((e,a)=>e+a.amount,0);return e.totalPaid+=t,e},{totalBill:0,totalPaid:0}),r=t.totalBill-t.totalPaid;return(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 md:gap-8 lg:grid-cols-4",children:[(0,s.jsxs)(b,{children:[(0,s.jsxs)(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(y,{className:"text-sm font-medium",children:"Total Cards"}),(0,s.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(w,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:a.length}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"cards managed"})]})]}),(0,s.jsxs)(b,{children:[(0,s.jsxs)(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(y,{className:"text-sm font-medium",children:"Total Billed"}),(0,s.jsx)(D.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(w,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:(0,h.v)(t.totalBill)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"this billing cycle"})]})]}),(0,s.jsxs)(b,{children:[(0,s.jsxs)(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(y,{className:"text-sm font-medium",children:"Total Paid"}),(0,s.jsx)(D.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(w,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:(0,h.v)(t.totalPaid)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"across all cards"})]})]}),(0,s.jsxs)(b,{children:[(0,s.jsxs)(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(y,{className:"text-sm font-medium",children:"Outstanding Dues"}),(0,s.jsx)(A.A,{className:"h-4 w-4 text-destructive"})]}),(0,s.jsxs)(w,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-destructive",children:(0,h.v)(r)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"total amount pending"})]})]})]})};var S=t(66766),P=t(38350),I=t(18763),T=t(77223),E=t(79556),R=t(89615),F=t(73158),_=t(10518),O=t(70154);let L=R.bL,z=R.l9;R.YJ,R.ZL,R.Pb,R.z6,r.forwardRef((e,a)=>{let{className:t,inset:r,children:l,...n}=e;return(0,s.jsxs)(R.ZP,{ref:a,className:(0,h.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...n,children:[l,(0,s.jsx)(F.A,{className:"ml-auto"})]})}).displayName=R.ZP.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(R.G5,{ref:a,className:(0,h.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}).displayName=R.G5.displayName;let Y=r.forwardRef((e,a)=>{let{className:t,sideOffset:r=4,...l}=e;return(0,s.jsx)(R.ZL,{children:(0,s.jsx)(R.UC,{ref:a,sideOffset:r,className:(0,h.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})});Y.displayName=R.UC.displayName;let B=r.forwardRef((e,a)=>{let{className:t,inset:r,...l}=e;return(0,s.jsx)(R.q7,{ref:a,className:(0,h.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...l})});B.displayName=R.q7.displayName,r.forwardRef((e,a)=>{let{className:t,children:r,checked:l,...n}=e;return(0,s.jsxs)(R.H_,{ref:a,className:(0,h.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:l,...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(R.VF,{children:(0,s.jsx)(_.A,{className:"h-4 w-4"})})}),r]})}).displayName=R.H_.displayName,r.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(R.hN,{ref:a,className:(0,h.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(R.VF,{children:(0,s.jsx)(O.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=R.hN.displayName,r.forwardRef((e,a)=>{let{className:t,inset:r,...l}=e;return(0,s.jsx)(R.JU,{ref:a,className:(0,h.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...l})}).displayName=R.JU.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(R.wv,{ref:a,className:(0,h.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=R.wv.displayName;var V=t(62278);let M=V.bL,U=V.l9,H=V.ZL,q=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(V.hJ,{className:(0,h.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:a})});q.displayName=V.hJ.displayName;let G=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsxs)(H,{children:[(0,s.jsx)(q,{}),(0,s.jsx)(V.UC,{ref:a,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r})]})});G.displayName=V.UC.displayName;let J=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};J.displayName="AlertDialogHeader";let $=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,h.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};$.displayName="AlertDialogFooter";let Z=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(V.hE,{ref:a,className:(0,h.cn)("text-lg font-semibold",t),...r})});Z.displayName=V.hE.displayName;let W=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(V.VY,{ref:a,className:(0,h.cn)("text-sm text-muted-foreground",t),...r})});W.displayName=V.VY.displayName;let X=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(V.rc,{ref:a,className:(0,h.cn)(p(),t),...r})});X.displayName=V.rc.displayName;let K=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(V.ZD,{ref:a,className:(0,h.cn)(p({variant:"outline"}),"mt-2 sm:mt-0",t),...r})});K.displayName=V.ZD.displayName;var Q=t(45821),ee=t(25318);let ea=Q.bL,et=Q.l9,es=Q.ZL;Q.bm;let er=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(Q.hJ,{ref:a,className:(0,h.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});er.displayName=Q.hJ.displayName;let el=r.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(es,{children:[(0,s.jsx)(er,{}),(0,s.jsxs)(Q.UC,{ref:a,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[r,(0,s.jsxs)(Q.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(ee.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});el.displayName=Q.UC.displayName;let en=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};en.displayName="DialogHeader";let ed=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,h.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};ed.displayName="DialogFooter";let ei=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(Q.hE,{ref:a,className:(0,h.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});ei.displayName=Q.hE.displayName;let eo=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(Q.VY,{ref:a,className:(0,h.cn)("text-sm text-muted-foreground",t),...r})});eo.displayName=Q.VY.displayName;let ec=(0,x.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function em(e){let{className:a,variant:t,...r}=e;return(0,s.jsx)("div",{className:(0,h.cn)(ec({variant:t}),a),...r})}var eu=t(27242);let ex=eu.bL,eh=eu.R6,ep=eu.Ke,ef="credit-cards",ej=e=>{var a;let t={...e};if(void 0===t.payments&&"number"==typeof t.paidAmount){let e=[];t.paidAmount>0&&e.push({id:new Date().toISOString()+"-migrated",amount:t.paidAmount,date:t.dueDate}),t.payments=e}return t.cardImage&&(t.cardImageFront=t.cardImage),delete t.paidAmount,delete t.cardImage,{id:t.id,cardholderName:t.cardholderName,bankName:t.bankName||"",mobileNumber:t.mobileNumber||"",cardType:t.cardType,cardNumber:t.cardNumber,expiryDate:t.expiryDate,cvv:t.cvv,billAmount:t.billAmount,payments:t.payments||[],billDate:t.billDate||t.dueDate,dueDate:t.dueDate,cardImageFront:t.cardImageFront,cardImageBack:t.cardImageBack,cardPin:t.cardPin,birthDate:t.birthDate,appPin:t.appPin,ifscCode:t.ifscCode,statementPassword:t.statementPassword,cardLimit:null!=(a=t.cardLimit)?a:0,cardVariant:t.cardVariant}},eg=()=>{let[e,a]=(0,r.useState)([]);(0,r.useEffect)(()=>{try{let e=window.localStorage.getItem(ef);if(e){let t=JSON.parse(e).map(ej);a(t)}}catch(e){console.error("Failed to parse cards from localStorage",e),a([])}},[]);let t=e=>{try{a(e),window.localStorage.setItem(ef,JSON.stringify(e))}catch(e){console.error("Failed to save cards to localStorage",e)}},s=(0,r.useCallback)(a=>{t([...e,{...a,id:new Date().toISOString(),payments:[]}])},[e]),l=(0,r.useCallback)(a=>{t([...e,...a.map(e=>({...e,id:"".concat(new Date().toISOString(),"-").concat(Math.random()),payments:[]}))])},[e]),n=(0,r.useCallback)(a=>{t(e.map(e=>e.id===a.id?a:e))},[e]),d=(0,r.useCallback)(a=>{t(e.filter(e=>e.id!==a))},[e]);return{cards:e,addCard:s,updateCard:n,deleteCard:d,bulkAddCards:l}},eb=e=>(0,s.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-credit-card",children:[(0,s.jsx)("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),(0,s.jsx)("line",{x1:"2",x2:"22",y1:"10",y2:"10"})]});var eN=t(62177),ey=t(90221),ev=t(50172),ew=t(40968);let eC=(0,x.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),eD=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(ew.b,{ref:a,className:(0,h.cn)(eC(),t),...r})});eD.displayName=ew.b.displayName;let eA=eN.Op,ek=r.createContext({}),eS=e=>{let{...a}=e;return(0,s.jsx)(ek.Provider,{value:{name:a.name},children:(0,s.jsx)(eN.xI,{...a})})},eP=()=>{let e=r.useContext(ek),a=r.useContext(eI),{getFieldState:t,formState:s}=(0,eN.xW)(),l=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=a;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...l}},eI=r.createContext({}),eT=r.forwardRef((e,a)=>{let{className:t,...l}=e,n=r.useId();return(0,s.jsx)(eI.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:a,className:(0,h.cn)("space-y-2",t),...l})})});eT.displayName="FormItem";let eE=r.forwardRef((e,a)=>{let{className:t,...r}=e,{error:l,formItemId:n}=eP();return(0,s.jsx)(eD,{ref:a,className:(0,h.cn)(l&&"text-destructive",t),htmlFor:n,...r})});eE.displayName="FormLabel";let eR=r.forwardRef((e,a)=>{let{...t}=e,{error:r,formItemId:l,formDescriptionId:n,formMessageId:d}=eP();return(0,s.jsx)(u.DX,{ref:a,id:l,"aria-describedby":r?"".concat(n," ").concat(d):"".concat(n),"aria-invalid":!!r,...t})});eR.displayName="FormControl",r.forwardRef((e,a)=>{let{className:t,...r}=e,{formDescriptionId:l}=eP();return(0,s.jsx)("p",{ref:a,id:l,className:(0,h.cn)("text-sm text-muted-foreground",t),...r})}).displayName="FormDescription";let eF=r.forwardRef((e,a)=>{var t;let{className:r,children:l,...n}=e,{error:d,formMessageId:i}=eP(),o=d?String(null!=(t=null==d?void 0:d.message)?t:""):l;return o?(0,s.jsx)("p",{ref:a,id:i,className:(0,h.cn)("text-sm font-medium text-destructive",r),...n,children:o}):null});eF.displayName="FormMessage";let e_=r.forwardRef((e,a)=>{let{className:t,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,h.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...l})});e_.displayName="Input";var eO=t(70927);let eL=["image/jpeg","image/jpg","image/png","image/webp"],ez=eO.Ik({cardholderName:eO.Yj().min(2,"Name must be at least 2 characters long."),bankName:eO.Yj().min(2,"Bank name is required."),mobileNumber:eO.Yj().regex(/^\d{10}$/,"Mobile number must be exactly 10 digits."),cardType:eO.k5(["RUPAY","VISA","MASTER","AMEX"],{required_error:"You need to select a card type."}),cardVariant:eO.Yj().optional().or(eO.eu("")),cardNumber:eO.Yj().regex(/^\d{16}$/,"Card number must be exactly 16 digits."),expiryDate:eO.Yj().regex(/^(0[1-9]|1[0-2])\/\d{2}$/,"Must be in MM/YY format."),cvv:eO.Yj().regex(/^\d{3,4}$/,"CVV must be 3 or 4 digits."),cardLimit:eO.au.number().min(0,"Card limit must be a positive number."),billAmount:eO.au.number().min(0,"Bill amount cannot be negative."),billDate:eO.p6({required_error:"A bill date is required."}),dueDate:eO.p6({required_error:"A due date is required."}),cardImageFront:eO.bz().optional().refine(e=>{var a;return!e||0===e.length||(null==e||null==(a=e[0])?void 0:a.size)<=5242880},"Max image size is 5MB.").refine(e=>{var a;return!e||0===e.length||eL.includes(null==e||null==(a=e[0])?void 0:a.type)},"Only .jpg, .jpeg, .png and .webp formats are supported."),cardImageBack:eO.bz().optional().refine(e=>{var a;return!e||0===e.length||(null==e||null==(a=e[0])?void 0:a.size)<=5242880},"Max image size is 5MB.").refine(e=>{var a;return!e||0===e.length||eL.includes(null==e||null==(a=e[0])?void 0:a.type)},"Only .jpg, .jpeg, .png and .webp formats are supported."),birthDate:eO.p6().optional(),cardPin:eO.Yj().regex(/^\d{4}$/,"PIN must be 4 digits.").optional().or(eO.eu("")),appPin:eO.Yj().regex(/^\d{4}$/,"PIN must be 4 digits.").optional().or(eO.eu("")),ifscCode:eO.Yj().optional().or(eO.eu("")),statementPassword:eO.Yj().optional().or(eO.eu(""))}).refine(e=>e.cardLimit>=e.billAmount,{message:"Card limit cannot be less than the bill amount.",path:["cardLimit"]}),eY=e=>eO.Ik({amount:eO.au.number({required_error:"Please enter a valid amount.",invalid_type_error:"Please enter a valid amount."}).min(.01,"Amount must be at least 0.01.").max(e,"Payment cannot exceed remaining balance of ".concat(e.toFixed(2),".")),note:eO.Yj().min(1,{message:"A note is required for the payment."})}),eB=eO.Ik({amount:eO.au.number().min(.01,"Amount must be positive."),date:eO.p6(),note:eO.Yj().optional()}),eV=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("textarea",{className:(0,h.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...r})});function eM(e){let{isOpen:a,onClose:t,card:l}=e,{updateCard:n}=eg(),[d,i]=r.useState(!1),[o,c]=r.useState(!1),m=l.payments.reduce((e,a)=>e+a.amount,0),u=l.billAmount-m,x=eY(u),p=(0,eN.mN)({resolver:(0,ey.u)(x),defaultValues:{amount:void 0,note:""}});r.useEffect(()=>{a&&p.reset({amount:void 0,note:""})},[a,p]);let j=async()=>{if(!await p.trigger("note"))return;c(!0);let e={...l};if(u>0){let a={id:new Date().toISOString(),amount:u,date:new Date().toISOString(),note:p.getValues("note")};e.payments=[...l.payments,a]}n(e),c(!1),t()},g=d||o;return(0,s.jsx)(ea,{open:a,onOpenChange:t,children:(0,s.jsxs)(el,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(en,{children:[(0,s.jsx)(ei,{children:"Record Payment"}),(0,s.jsxs)(eo,{children:["Record a payment for ",l.cardholderName,"'s card."]})]}),(0,s.jsxs)("div",{className:"grid gap-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Total Bill:"}),(0,s.jsx)("span",{children:(0,h.v)(l.billAmount)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Paid Amount:"}),(0,s.jsx)("span",{children:(0,h.v)(m)})]}),(0,s.jsxs)("div",{className:"flex justify-between font-medium",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Remaining Due:"}),(0,s.jsx)("span",{children:(0,h.v)(u)})]})]}),(0,s.jsx)(eA,{...p,children:(0,s.jsxs)("form",{onSubmit:p.handleSubmit(e=>{i(!0);let a={id:new Date().toISOString(),amount:e.amount,date:new Date().toISOString(),note:e.note},s=[...l.payments,a];n({...l,payments:s}),i(!1),t()}),className:"space-y-4",children:[(0,s.jsx)(eS,{control:p.control,name:"amount",render:e=>{var a;let{field:t}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Payment Amount"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{type:"number",step:"0.01",placeholder:(0,h.v)(u),...t,onChange:e=>t.onChange(parseFloat(e.target.value)||0),value:null!=(a=t.value)?a:""})}),(0,s.jsx)(eF,{})]})}}),(0,s.jsx)(eS,{control:p.control,name:"note",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Note"}),(0,s.jsx)(eR,{children:(0,s.jsx)(eV,{placeholder:"e.g. Payment for dining",...a})}),(0,s.jsx)(eF,{})]})}}),(0,s.jsxs)(ed,{className:"gap-2 sm:justify-between pt-4",children:[(0,s.jsxs)(f,{type:"button",variant:"secondary",onClick:j,disabled:g||u<=0,children:[o&&(0,s.jsx)(ev.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Pay Full Amount"]}),(0,s.jsxs)(f,{type:"submit",disabled:g,children:[d&&(0,s.jsx)(ev.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Record Partial Payment"]})]})]})})]})})}eV.displayName="Textarea";var eU=t(51920),eH=t(83013),eq=t(98176);let eG=eq.bL,eJ=eq.l9,e$=r.forwardRef((e,a)=>{let{className:t,align:r="center",sideOffset:l=4,...n}=e;return(0,s.jsx)(eq.ZL,{children:(0,s.jsx)(eq.UC,{ref:a,align:r,sideOffset:l,className:(0,h.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});e$.displayName=eq.UC.displayName;var eZ=t(965),eW=t(34838);function eX(e){let{className:a,classNames:t,showOutsideDays:r=!0,...l}=e;return(0,s.jsx)(eW.hv,{showOutsideDays:r,className:(0,h.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,h.cn)(p({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,h.cn)(p({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:e=>{let{className:a,...t}=e;return(0,s.jsx)(eZ.A,{className:(0,h.cn)("h-4 w-4",a),...t})},IconRight:e=>{let{className:a,...t}=e;return(0,s.jsx)(F.A,{className:(0,h.cn)("h-4 w-4",a),...t})}},...l})}function eK(e){let{isOpen:a,onClose:t,card:l,payment:n}=e,{updateCard:d}=eg(),[i,o]=(0,r.useState)(!1),c=(0,eN.mN)({resolver:(0,ey.u)(eB),defaultValues:{amount:n.amount,date:new Date(n.date),note:n.note||""}});return(0,r.useEffect)(()=>{n&&c.reset({amount:n.amount,date:new Date(n.date),note:n.note||""})},[n,c,a]),(0,s.jsx)(ea,{open:a,onOpenChange:t,children:(0,s.jsxs)(el,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(en,{children:[(0,s.jsx)(ei,{children:"Edit Payment"}),(0,s.jsxs)(eo,{children:["Update the payment details for your ",l.cardType," card."]})]}),(0,s.jsx)(eA,{...c,children:(0,s.jsxs)("form",{onSubmit:c.handleSubmit(e=>{o(!0);let a=l.payments.map(a=>a.id===n.id?{...a,amount:e.amount,date:e.date.toISOString(),note:e.note}:a);if(l.payments.filter(e=>e.id!==n.id).reduce((e,a)=>e+a.amount,0)+e.amount>l.billAmount){c.setError("amount",{type:"manual",message:"Total payments cannot exceed bill amount of ".concat(l.billAmount,".")}),o(!1);return}d({...l,payments:a}),o(!1),t()}),className:"space-y-4",children:[(0,s.jsx)(eS,{control:c.control,name:"amount",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Amount"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{type:"number",step:"0.01",...a,onChange:e=>a.onChange(parseFloat(e.target.value)||0)})}),(0,s.jsx)(eF,{})]})}}),(0,s.jsx)(eS,{control:c.control,name:"date",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{className:"flex flex-col",children:[(0,s.jsx)(eE,{children:"Payment Date"}),(0,s.jsxs)(eG,{children:[(0,s.jsx)(eJ,{asChild:!0,children:(0,s.jsx)(eR,{children:(0,s.jsxs)(f,{variant:"outline",className:(0,h.cn)("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?(0,eH.GP)(a.value,"PPP"):(0,s.jsx)("span",{children:"Pick a date"}),(0,s.jsx)(eU.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,s.jsx)(e$,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(eX,{mode:"single",selected:a.value,onSelect:a.onChange,disabled:e=>e<new Date("1900-01-01"),initialFocus:!0})})]}),(0,s.jsx)(eF,{})]})}}),(0,s.jsx)(eS,{control:c.control,name:"note",render:e=>{var a;let{field:t}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Note (Optional)"}),(0,s.jsx)(eR,{children:(0,s.jsx)(eV,{placeholder:"Add a note for this payment...",...t,value:null!=(a=t.value)?a:""})}),(0,s.jsx)(eF,{})]})}}),(0,s.jsxs)(ed,{children:[(0,s.jsx)(f,{type:"button",variant:"outline",onClick:t,disabled:i,children:"Cancel"}),(0,s.jsxs)(f,{type:"submit",disabled:i,children:[i&&(0,s.jsx)(ev.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})})]})})}eX.displayName="Calendar";let eQ=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:a,className:(0,h.cn)("w-full caption-bottom text-sm",t),...r})})});eQ.displayName="Table";let e0=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("thead",{ref:a,className:(0,h.cn)("[&_tr]:border-b",t),...r})});e0.displayName="TableHeader";let e1=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("tbody",{ref:a,className:(0,h.cn)("[&_tr:last-child]:border-0",t),...r})});e1.displayName="TableBody",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("tfoot",{ref:a,className:(0,h.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r})}).displayName="TableFooter";let e4=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("tr",{ref:a,className:(0,h.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r})});e4.displayName="TableRow";let e2=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("th",{ref:a,className:(0,h.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r})});e2.displayName="TableHead";let e5=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("td",{ref:a,className:(0,h.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r})});function e8(e){let{card:a}=e,{updateCard:t}=eg(),[l,n]=(0,r.useState)(),d=e=>{let s=a.payments.filter(a=>a.id!==e);t({...a,payments:s})},i=e=>{n(e)};return(0,s.jsxs)("div",{className:"space-y-2 pt-2",children:[0===a.payments.length?(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"No payments recorded yet."}):(0,s.jsxs)(eQ,{children:[(0,s.jsx)(e0,{children:(0,s.jsxs)(e4,{children:[(0,s.jsx)(e2,{children:"Date"}),(0,s.jsx)(e2,{children:"Note"}),(0,s.jsx)(e2,{className:"text-right",children:"Amount"}),(0,s.jsx)(e2,{className:"w-[100px] text-right",children:"Actions"})]})}),(0,s.jsx)(e1,{children:a.payments.slice().sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime()).map(e=>(0,s.jsxs)(e4,{children:[(0,s.jsx)(e5,{children:new Date(e.date).toLocaleDateString()}),(0,s.jsx)(e5,{className:"max-w-[150px] truncate",title:e.note,children:e.note}),(0,s.jsx)(e5,{className:"text-right",children:(0,h.v)(e.amount)}),(0,s.jsxs)(e5,{className:"flex gap-1 justify-end",children:[(0,s.jsx)(f,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>i(e),children:(0,s.jsx)(I.A,{className:"h-4 w-4"})}),(0,s.jsxs)(M,{children:[(0,s.jsx)(U,{asChild:!0,children:(0,s.jsx)(f,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",children:(0,s.jsx)(T.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(G,{children:[(0,s.jsxs)(J,{children:[(0,s.jsx)(Z,{children:"Delete Payment?"}),(0,s.jsx)(W,{children:"This action cannot be undone. This will permanently delete this payment record."})]}),(0,s.jsxs)($,{children:[(0,s.jsx)(K,{children:"Cancel"}),(0,s.jsx)(X,{onClick:()=>d(e.id),className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})]})]},e.id))})]}),l&&(0,s.jsx)(eK,{isOpen:!!l,onClose:()=>{n(void 0)},card:a,payment:l})]})}e5.displayName="TableCell",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("caption",{ref:a,className:(0,h.cn)("mt-4 text-sm text-muted-foreground",t),...r})}).displayName="TableCaption";var e3=t(87481),e6=t(85005),e9=t(12543),e7=t(19968);let ae=r.createContext(null);function aa(){let e=r.useContext(ae);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let at=r.forwardRef((e,a)=>{let{orientation:t="horizontal",opts:l,setApi:n,plugins:d,className:i,children:o,...c}=e,[m,u]=(0,e6.A)({...l,axis:"horizontal"===t?"x":"y"},d),[x,p]=r.useState(!1),[f,j]=r.useState(!1),g=r.useCallback(e=>{e&&(p(e.canScrollPrev()),j(e.canScrollNext()))},[]),b=r.useCallback(()=>{null==u||u.scrollPrev()},[u]),N=r.useCallback(()=>{null==u||u.scrollNext()},[u]),y=r.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),b()):"ArrowRight"===e.key&&(e.preventDefault(),N())},[b,N]);return r.useEffect(()=>{u&&n&&n(u)},[u,n]),r.useEffect(()=>{if(u)return g(u),u.on("reInit",g),u.on("select",g),()=>{null==u||u.off("select",g)}},[u,g]),(0,s.jsx)(ae.Provider,{value:{carouselRef:m,api:u,opts:l,orientation:t||((null==l?void 0:l.axis)==="y"?"vertical":"horizontal"),scrollPrev:b,scrollNext:N,canScrollPrev:x,canScrollNext:f},children:(0,s.jsx)("div",{ref:a,onKeyDownCapture:y,className:(0,h.cn)("relative",i),role:"region","aria-roledescription":"carousel",...c,children:o})})});at.displayName="Carousel";let as=r.forwardRef((e,a)=>{let{className:t,...r}=e,{carouselRef:l,orientation:n}=aa();return(0,s.jsx)("div",{ref:l,className:"overflow-hidden",children:(0,s.jsx)("div",{ref:a,className:(0,h.cn)("flex","horizontal"===n?"-ml-4":"-mt-4 flex-col",t),...r})})});as.displayName="CarouselContent";let ar=r.forwardRef((e,a)=>{let{className:t,...r}=e,{orientation:l}=aa();return(0,s.jsx)("div",{ref:a,role:"group","aria-roledescription":"slide",className:(0,h.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===l?"pl-4":"pt-4",t),...r})});ar.displayName="CarouselItem";let al=r.forwardRef((e,a)=>{let{className:t,variant:r="outline",size:l="icon",...n}=e,{orientation:d,scrollPrev:i,canScrollPrev:o}=aa();return(0,s.jsxs)(f,{ref:a,variant:r,size:l,className:(0,h.cn)("absolute  h-8 w-8 rounded-full","horizontal"===d?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",t),disabled:!o,onClick:i,...n,children:[(0,s.jsx)(e9.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Previous slide"})]})});al.displayName="CarouselPrevious";let an=r.forwardRef((e,a)=>{let{className:t,variant:r="outline",size:l="icon",...n}=e,{orientation:d,scrollNext:i,canScrollNext:o}=aa();return(0,s.jsxs)(f,{ref:a,variant:r,size:l,className:(0,h.cn)("absolute h-8 w-8 rounded-full","horizontal"===d?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",t),disabled:!o,onClick:i,...n,children:[(0,s.jsx)(e7.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Next slide"})]})});an.displayName="CarouselNext";let ad=e=>{let{card:a,onEdit:t}=e,{deleteCard:l}=eg(),{toast:n}=(0,e3.dj)(),[d,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),[x,p]=(0,r.useState)(""),j=a.payments.reduce((e,a)=>e+a.amount,0),g=a.billAmount-j,A=(0,h.O)(a),k=a.cardLimit-g;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(b,{className:"flex flex-col",children:[(0,s.jsxs)(N,{className:"relative flex-row items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(y,{children:a.cardholderName}),(0,s.jsxs)(v,{children:[a.bankName," \xb7 ",a.cardType," ",a.cardVariant&&"(".concat(a.cardVariant,")")," \xb7 Due: ",new Date(a.dueDate).toLocaleDateString()]})]}),(0,s.jsxs)(L,{children:[(0,s.jsx)(z,{asChild:!0,children:(0,s.jsx)(f,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,s.jsx)(P.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(Y,{align:"end",children:[(0,s.jsxs)(B,{onClick:()=>t(a),children:[(0,s.jsx)(I.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,s.jsxs)(B,{onClick:()=>i(!0),className:"text-destructive focus:text-destructive",children:[(0,s.jsx)(T.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]}),(0,s.jsxs)(w,{className:"flex flex-1 flex-col justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[a.cardImageFront||a.cardImageBack?(0,s.jsxs)(ea,{children:[(0,s.jsx)(et,{asChild:!0,children:(0,s.jsx)(S.default,{src:a.cardImageFront||a.cardImageBack,alt:"Credit Card Image",width:300,height:180,className:"rounded-lg object-cover aspect-[1.586] w-full cursor-pointer"})}),(0,s.jsxs)(el,{className:"p-0 border-0 bg-transparent shadow-none max-w-fit",children:[(0,s.jsx)(en,{children:(0,s.jsx)(ei,{className:"sr-only",children:"Full-size Card Image"})}),(0,s.jsxs)(at,{className:"w-full max-w-4xl",children:[(0,s.jsxs)(as,{children:[a.cardImageFront&&(0,s.jsx)(ar,{children:(0,s.jsx)(S.default,{src:a.cardImageFront,alt:"Credit Card Front",width:800,height:500,className:"rounded-lg object-contain"})}),a.cardImageBack&&(0,s.jsx)(ar,{children:(0,s.jsx)(S.default,{src:a.cardImageBack,alt:"Credit Card Back",width:800,height:500,className:"rounded-lg object-contain"})})]}),a.cardImageFront&&a.cardImageBack&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(al,{}),(0,s.jsx)(an,{})]})]})]})]}):(0,s.jsx)("div",{className:"aspect-[1.586] w-full rounded-lg bg-muted flex items-center justify-center",children:(0,s.jsx)(eb,{className:"h-16 w-16 text-muted-foreground"})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("p",{className:"font-mono text-sm tracking-wider",children:["**** **** **** ",a.cardNumber.slice(-4)]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Expires ",a.expiryDate]})]}),(0,s.jsxs)("div",{className:"space-y-1 text-sm pt-2 border-t",children:[(0,s.jsxs)("div",{className:"flex justify-between pt-2",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Available Limit"}),(0,s.jsx)("span",{children:(0,h.v)(k)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Total Limit"}),(0,s.jsx)("span",{children:(0,h.v)(a.cardLimit)})]})]})]}),(0,s.jsxs)("div",{className:"flex items-end justify-between",children:[(0,s.jsx)(em,{variant:"paid"===A?"default":"outline",className:(0,h.cn)({"bg-accent text-accent-foreground":"paid"===A,"bg-destructive text-destructive-foreground":"unpaid"===A,"bg-orange-400 text-white border-orange-400":"partially-paid"===A}),children:{paid:"Paid",unpaid:"Unpaid","partially-paid":"Partially Paid"}[A]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-lg font-semibold",children:(0,h.v)(g)}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Remaining of ",(0,h.v)(a.billAmount)]})]})]})]}),"paid"!==A&&(0,s.jsx)(C,{children:(0,s.jsxs)(f,{className:"w-full",onClick:()=>c(!0),children:[(0,s.jsx)(D.A,{className:"mr-2 h-4 w-4"}),"Record Payment"]})}),(0,s.jsxs)(ex,{open:m,onOpenChange:u,className:"border-t",children:[(0,s.jsx)(eh,{asChild:!0,children:(0,s.jsxs)(f,{variant:"ghost",className:"w-full justify-center gap-2 text-sm rounded-t-none",children:["Payment History",(0,s.jsx)(E.A,{className:(0,h.cn)("h-4 w-4 transition-transform",m&&"rotate-180")})]})}),(0,s.jsx)(ep,{className:"px-6 pb-4",children:(0,s.jsx)(e8,{card:a})})]})]}),(0,s.jsx)(M,{open:d,onOpenChange:e=>{e||p(""),i(e)},children:(0,s.jsxs)(G,{children:[(0,s.jsxs)(J,{children:[(0,s.jsxs)(Z,{children:["Delete ",a.cardType," ending in ",a.cardNumber.slice(-4),"?"]}),(0,s.jsxs)(W,{children:["This action cannot be undone. This will permanently delete this credit card. To confirm, please type ",(0,s.jsx)("strong",{children:"DELETE"})," below."]})]}),(0,s.jsxs)("div",{className:"space-y-2 py-2",children:[(0,s.jsx)(eD,{htmlFor:"delete-confirm",className:"sr-only",children:"Type DELETE to confirm"}),(0,s.jsx)(e_,{id:"delete-confirm",value:x,onChange:e=>p(e.target.value),placeholder:"DELETE",autoComplete:"off",autoFocus:!0})]}),(0,s.jsxs)($,{children:[(0,s.jsx)(K,{children:"Cancel"}),(0,s.jsx)(X,{onClick:()=>{l(a.id),i(!1),n({title:"Card Deleted",description:"".concat(a.cardType," ending in ").concat(a.cardNumber.slice(-4)," has been deleted.")})},disabled:"DELETE"!==x,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})}),o&&(0,s.jsx)(eM,{isOpen:o,onClose:()=>{c(!1)},card:a})]})},ai=e=>{let{card:a,onEdit:t}=e,{deleteCard:l}=eg(),{toast:n}=(0,e3.dj)(),[d,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),[x,p]=(0,r.useState)(""),j=a.payments.reduce((e,a)=>e+a.amount,0),g=a.billAmount-j,N=(0,h.O)(a),y=a.cardLimit-g;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b,{children:(0,s.jsxs)(ex,{open:m,onOpenChange:u,children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-4 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[a.cardImageFront||a.cardImageBack?(0,s.jsxs)(ea,{children:[(0,s.jsx)(et,{asChild:!0,children:(0,s.jsx)(S.default,{src:a.cardImageFront||a.cardImageBack,alt:"Credit Card Image",width:80,height:50,className:"rounded-md object-cover aspect-[1.586] cursor-pointer shrink-0"})}),(0,s.jsxs)(el,{className:"p-0 border-0 bg-transparent shadow-none max-w-fit",children:[(0,s.jsx)(en,{children:(0,s.jsx)(ei,{className:"sr-only",children:"Full-size Card Image"})}),(0,s.jsxs)(at,{className:"w-full max-w-4xl",children:[(0,s.jsxs)(as,{children:[a.cardImageFront&&(0,s.jsx)(ar,{children:(0,s.jsx)(S.default,{src:a.cardImageFront,alt:"Credit Card Front",width:800,height:500,className:"rounded-lg object-contain"})}),a.cardImageBack&&(0,s.jsx)(ar,{children:(0,s.jsx)(S.default,{src:a.cardImageBack,alt:"Credit Card Back",width:800,height:500,className:"rounded-lg object-contain"})})]}),a.cardImageFront&&a.cardImageBack&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(al,{}),(0,s.jsx)(an,{})]})]})]})]}):(0,s.jsx)("div",{className:"aspect-[1.586] w-[80px] rounded-md bg-muted flex items-center justify-center shrink-0",children:(0,s.jsx)(eb,{className:"h-8 w-8 text-muted-foreground"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-semibold truncate",title:a.cardholderName,children:a.cardholderName}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.bankName," \xb7 ",a.cardType," ",a.cardVariant&&"(".concat(a.cardVariant,")")," \xb7 **** ",a.cardNumber.slice(-4)]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between md:justify-start gap-4 flex-wrap",children:[(0,s.jsxs)("div",{className:"text-left md:text-center w-28 shrink-0",children:[(0,s.jsx)(em,{variant:"paid"===N?"default":"outline",className:(0,h.cn)("text-xs",{"bg-accent text-accent-foreground":"paid"===N,"bg-destructive text-destructive-foreground":"unpaid"===N,"bg-orange-400 text-white border-orange-400":"partially-paid"===N}),children:{paid:"Paid",unpaid:"Unpaid","partially-paid":"Partially Paid"}[N]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Status"})]}),(0,s.jsxs)("div",{className:"text-left md:text-center w-32 shrink-0",children:[(0,s.jsx)("p",{className:"font-semibold",children:(0,h.v)(g)}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Due of ",(0,h.v)(a.billAmount)]})]}),(0,s.jsxs)("div",{className:"text-left md:text-center w-32 shrink-0",children:[(0,s.jsx)("p",{className:"font-semibold",children:(0,h.v)(y)}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["of ",(0,h.v)(a.cardLimit)]})]}),(0,s.jsxs)("div",{className:"text-left md:text-center w-28 shrink-0",children:[(0,s.jsx)("p",{className:"font-semibold",children:new Date(a.billDate).toLocaleDateString()}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Bill Date"})]}),(0,s.jsxs)("div",{className:"text-left md:text-center w-28 shrink-0",children:[(0,s.jsx)("p",{className:"font-semibold",children:new Date(a.dueDate).toLocaleDateString()}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Due Date"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 ml-auto shrink-0",children:["paid"!==N&&(0,s.jsxs)(f,{size:"sm",onClick:()=>c(!0),children:[(0,s.jsx)(D.A,{className:"mr-2 h-4 w-4"}),"Pay"]}),(0,s.jsx)(eh,{asChild:!0,children:(0,s.jsxs)(f,{variant:"ghost",size:"sm",children:["History",(0,s.jsx)(E.A,{className:(0,h.cn)("h-4 w-4 transition-transform ml-1",m&&"rotate-180")})]})}),(0,s.jsxs)(L,{children:[(0,s.jsx)(z,{asChild:!0,children:(0,s.jsx)(f,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,s.jsx)(P.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(Y,{align:"end",children:[(0,s.jsxs)(B,{onClick:()=>t(a),children:[(0,s.jsx)(I.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,s.jsxs)(B,{onClick:()=>i(!0),className:"text-destructive focus:text-destructive",children:[(0,s.jsx)(T.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})]}),(0,s.jsx)(ep,{children:(0,s.jsx)("div",{className:"border-t",children:(0,s.jsx)("div",{className:"px-6 pb-4 pt-4",children:(0,s.jsx)(e8,{card:a})})})})]})}),(0,s.jsx)(M,{open:d,onOpenChange:e=>{e||p(""),i(e)},children:(0,s.jsxs)(G,{children:[(0,s.jsxs)(J,{children:[(0,s.jsxs)(Z,{children:["Delete ",a.cardType," ending in ",a.cardNumber.slice(-4),"?"]}),(0,s.jsxs)(W,{children:["This action cannot be undone. This will permanently delete this credit card. To confirm, please type ",(0,s.jsx)("strong",{children:"DELETE"})," below."]})]}),(0,s.jsxs)("div",{className:"space-y-2 py-2",children:[(0,s.jsx)(eD,{htmlFor:"delete-confirm",className:"sr-only",children:"Type DELETE to confirm"}),(0,s.jsx)(e_,{id:"delete-confirm",value:x,onChange:e=>p(e.target.value),placeholder:"DELETE",autoComplete:"off",autoFocus:!0})]}),(0,s.jsxs)($,{children:[(0,s.jsx)(K,{children:"Cancel"}),(0,s.jsx)(X,{onClick:()=>{l(a.id),i(!1),n({title:"Card Deleted",description:"".concat(a.cardType," ending in ").concat(a.cardNumber.slice(-4)," has been deleted.")})},disabled:"DELETE"!==x,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})}),o&&(0,s.jsx)(eM,{isOpen:o,onClose:()=>{c(!1)},card:a})]})},ao=e=>{let{cards:a,onEdit:t,searchTerm:r,viewMode:l}=e;return 0===a.length?(0,s.jsxs)(b,{className:"mt-4",children:[(0,s.jsx)(N,{children:(0,s.jsxs)(y,{className:"flex items-center gap-2",children:[(0,s.jsx)(j.A,{className:"h-6 w-6"}),r?"No Matching Cards":"No Cards Yet"]})}),(0,s.jsx)(w,{children:(0,s.jsx)(v,{children:r?"No cards match your search. Try a different search term.":'You haven\'t added any credit cards. Click "Add New Card" to get started.'})})]}):"list"===l?(0,s.jsx)("div",{className:"flex flex-col gap-4",children:a.map(e=>(0,s.jsx)(ai,{card:e,onEdit:t},e.id))}):(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:a.map(e=>(0,s.jsx)(ad,{card:e,onEdit:t},e.id))})};var ac=t(4011),am=t(77381);let au=ac.bL;ac.YJ;let ax=ac.WT,ah=r.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(ac.l9,{ref:a,className:(0,h.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[r,(0,s.jsx)(ac.In,{asChild:!0,children:(0,s.jsx)(E.A,{className:"h-4 w-4 opacity-50"})})]})});ah.displayName=ac.l9.displayName;let ap=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(ac.PP,{ref:a,className:(0,h.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(am.A,{className:"h-4 w-4"})})});ap.displayName=ac.PP.displayName;let af=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(ac.wn,{ref:a,className:(0,h.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(E.A,{className:"h-4 w-4"})})});af.displayName=ac.wn.displayName;let aj=r.forwardRef((e,a)=>{let{className:t,children:r,position:l="popper",...n}=e;return(0,s.jsx)(ac.ZL,{children:(0,s.jsxs)(ac.UC,{ref:a,className:(0,h.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...n,children:[(0,s.jsx)(ap,{}),(0,s.jsx)(ac.LM,{className:(0,h.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(af,{})]})})});aj.displayName=ac.UC.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(ac.JU,{ref:a,className:(0,h.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=ac.JU.displayName;let ag=r.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(ac.q7,{ref:a,className:(0,h.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(ac.VF,{children:(0,s.jsx)(_.A,{className:"h-4 w-4"})})}),(0,s.jsx)(ac.p4,{children:r})]})});ag.displayName=ac.q7.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(ac.wv,{ref:a,className:(0,h.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=ac.wv.displayName;let ab=e=>new Promise((a,t)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>a(s.result),s.onerror=e=>t(e)});function aN(e){let{isOpen:a,onClose:t,card:l}=e,{addCard:n,updateCard:d}=eg(),[i,o]=(0,r.useState)(!1),c=(0,eN.mN)({resolver:(0,ey.u)(ez),defaultValues:{cardholderName:"",bankName:"",mobileNumber:"",cardType:void 0,cardVariant:"",cardNumber:"",expiryDate:"",cvv:"",cardLimit:0,billAmount:0,billDate:void 0,dueDate:void 0,cardImageFront:void 0,cardImageBack:void 0,birthDate:void 0,cardPin:"",appPin:"",ifscCode:"",statementPassword:""}});(0,r.useEffect)(()=>{l?c.reset({...l,billDate:new Date(l.billDate),dueDate:new Date(l.dueDate),birthDate:l.birthDate?new Date(l.birthDate):void 0,cardImageFront:void 0,cardImageBack:void 0}):c.reset({cardholderName:"",bankName:"",mobileNumber:"",cardType:void 0,cardVariant:"",cardNumber:"",expiryDate:"",cvv:"",cardLimit:0,billAmount:0,billDate:void 0,dueDate:void 0,cardImageFront:void 0,cardImageBack:void 0,birthDate:void 0,cardPin:"",appPin:"",ifscCode:"",statementPassword:""})},[l,c,a]);let m=async e=>{o(!0);let a=null==l?void 0:l.cardImageFront;e.cardImageFront&&e.cardImageFront.length>0&&(a=await ab(e.cardImageFront[0]));let s=null==l?void 0:l.cardImageBack;e.cardImageBack&&e.cardImageBack.length>0&&(s=await ab(e.cardImageBack[0]));let r={...e,billDate:e.billDate.toISOString(),dueDate:e.dueDate.toISOString(),birthDate:e.birthDate?e.birthDate.toISOString():void 0,cardImageFront:a,cardImageBack:s};if(l){let a={...l,...r};l.billAmount!==e.billAmount&&(a.payments=[]),d(a)}else n(r);o(!1),t()};return(0,s.jsx)(ea,{open:a,onOpenChange:t,children:(0,s.jsxs)(el,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(en,{children:[(0,s.jsx)(ei,{children:l?"Edit Credit Card":"Add New Credit Card"}),(0,s.jsxs)(eo,{children:[l?"Update the details of your credit card.":"Enter the details of your new credit card."," All data is saved locally on your device."]})]}),(0,s.jsx)(eA,{...c,children:(0,s.jsxs)("form",{onSubmit:c.handleSubmit(m),className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(eS,{control:c.control,name:"cardholderName",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Cardholder Name"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{placeholder:"John Doe",...a})}),(0,s.jsx)(eF,{})]})}}),(0,s.jsx)(eS,{control:c.control,name:"bankName",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Bank Name"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{placeholder:"e.g. Acme Bank",...a})}),(0,s.jsx)(eF,{})]})}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(eS,{control:c.control,name:"mobileNumber",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Mobile Number"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{placeholder:"9876543210",...a})}),(0,s.jsx)(eF,{})]})}}),(0,s.jsx)(eS,{control:c.control,name:"cardType",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Card Type"}),(0,s.jsxs)(au,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,s.jsx)(eR,{children:(0,s.jsx)(ah,{children:(0,s.jsx)(ax,{placeholder:"Select a card type"})})}),(0,s.jsxs)(aj,{children:[(0,s.jsx)(ag,{value:"VISA",children:"VISA"}),(0,s.jsx)(ag,{value:"MASTER",children:"MASTER"}),(0,s.jsx)(ag,{value:"AMEX",children:"AMEX"}),(0,s.jsx)(ag,{value:"RUPAY",children:"RUPAY"})]})]}),(0,s.jsx)(eF,{})]})}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(eS,{control:c.control,name:"cardVariant",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Card Variant (Optional)"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{placeholder:"e.g. Platinum, Millennia",...a})}),(0,s.jsx)(eF,{})]})}}),(0,s.jsx)(eS,{control:c.control,name:"cardNumber",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Card Number"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{placeholder:"**** **** **** ****",...a})}),(0,s.jsx)(eF,{})]})}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(eS,{control:c.control,name:"expiryDate",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Expiry Date"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{placeholder:"MM/YY",...a})}),(0,s.jsx)(eF,{})]})}}),(0,s.jsx)(eS,{control:c.control,name:"cvv",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"CVV"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{type:"password",placeholder:"***",...a})}),(0,s.jsx)(eF,{})]})}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(eS,{control:c.control,name:"cardLimit",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Card Limit"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{type:"number",step:"0.01",placeholder:"e.g. 100000",...a})}),(0,s.jsx)(eF,{})]})}}),(0,s.jsx)(eS,{control:c.control,name:"billAmount",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Bill Amount"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{type:"number",step:"0.01",placeholder:"0.00",...a})}),(0,s.jsx)(eF,{})]})}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(eS,{control:c.control,name:"billDate",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{className:"flex flex-col",children:[(0,s.jsx)(eE,{children:"Bill Date"}),(0,s.jsxs)(eG,{children:[(0,s.jsx)(eJ,{asChild:!0,children:(0,s.jsx)(eR,{children:(0,s.jsxs)(f,{variant:"outline",className:(0,h.cn)("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?(0,eH.GP)(a.value,"PPP"):(0,s.jsx)("span",{children:"Pick a date"}),(0,s.jsx)(eU.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,s.jsx)(e$,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(eX,{mode:"single",selected:a.value,onSelect:a.onChange,disabled:e=>e<new Date("1900-01-01"),initialFocus:!0})})]}),(0,s.jsx)(eF,{})]})}}),(0,s.jsx)(eS,{control:c.control,name:"dueDate",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{className:"flex flex-col",children:[(0,s.jsx)(eE,{children:"Due Date"}),(0,s.jsxs)(eG,{children:[(0,s.jsx)(eJ,{asChild:!0,children:(0,s.jsx)(eR,{children:(0,s.jsxs)(f,{variant:"outline",className:(0,h.cn)("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?(0,eH.GP)(a.value,"PPP"):(0,s.jsx)("span",{children:"Pick a date"}),(0,s.jsx)(eU.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,s.jsx)(e$,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(eX,{mode:"single",selected:a.value,onSelect:a.onChange,disabled:e=>e<new Date("1900-01-01"),initialFocus:!0})})]}),(0,s.jsx)(eF,{})]})}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(eS,{control:c.control,name:"birthDate",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{className:"flex flex-col",children:[(0,s.jsx)(eE,{children:"Birth Date (Optional)"}),(0,s.jsxs)(eG,{children:[(0,s.jsx)(eJ,{asChild:!0,children:(0,s.jsx)(eR,{children:(0,s.jsxs)(f,{variant:"outline",className:(0,h.cn)("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?(0,eH.GP)(a.value,"PPP"):(0,s.jsx)("span",{children:"Pick a date"}),(0,s.jsx)(eU.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,s.jsx)(e$,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(eX,{mode:"single",selected:a.value,onSelect:a.onChange,disabled:e=>e>new Date||e<new Date("1900-01-01"),initialFocus:!0})})]}),(0,s.jsx)(eF,{})]})}}),(0,s.jsx)(eS,{control:c.control,name:"cardPin",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Card PIN (Optional)"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{type:"password",placeholder:"1234",...a})}),(0,s.jsx)(eF,{})]})}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(eS,{control:c.control,name:"appPin",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"App PIN (Optional)"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{type:"password",placeholder:"4-digit PIN",...a})}),(0,s.jsx)(eF,{})]})}}),(0,s.jsx)(eS,{control:c.control,name:"ifscCode",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"IFSC Code (Optional)"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{placeholder:"e.g. SBIN0001234",...a})}),(0,s.jsx)(eF,{})]})}})]}),(0,s.jsx)(eS,{control:c.control,name:"statementPassword",render:e=>{let{field:a}=e;return(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Statement Password (Optional)"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{type:"password",placeholder:"e.g. john_ddmm",...a})}),(0,s.jsx)(eF,{})]})}}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(eS,{control:c.control,name:"cardImageFront",render:()=>(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Card Image (Front)"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{type:"file",accept:"image/*",...c.register("cardImageFront")})}),(0,s.jsx)(eF,{})]})}),(0,s.jsx)(eS,{control:c.control,name:"cardImageBack",render:()=>(0,s.jsxs)(eT,{children:[(0,s.jsx)(eE,{children:"Card Image (Back)"}),(0,s.jsx)(eR,{children:(0,s.jsx)(e_,{type:"file",accept:"image/*",...c.register("cardImageBack")})}),(0,s.jsx)(eF,{})]})})]}),(0,s.jsxs)(ed,{children:[(0,s.jsx)(f,{type:"button",variant:"outline",onClick:t,disabled:i,children:"Cancel"}),(0,s.jsxs)(f,{type:"submit",disabled:i,children:[i&&(0,s.jsx)(ev.A,{className:"mr-2 h-4 w-4 animate-spin"}),l?"Save Changes":"Add Card"]})]})]})})]})})}var ay=t(3925);let av=(0,x.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),aw=r.forwardRef((e,a)=>{let{className:t,variant:r,...l}=e;return(0,s.jsx)("div",{ref:a,role:"alert",className:(0,h.cn)(av({variant:r}),t),...l})});aw.displayName="Alert";let aC=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("h5",{ref:a,className:(0,h.cn)("mb-1 font-medium leading-none tracking-tight",t),...r})});aC.displayName="AlertTitle";let aD=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,h.cn)("text-sm [&_p]:leading-relaxed",t),...r})});aD.displayName="AlertDescription";let aA=eO.Ik({cardholderName:eO.Yj().min(2),bankName:eO.Yj().min(2,{message:"Bank name is required."}),mobileNumber:eO.Yj().regex(/^\d{10}$/),cardType:eO.k5(["RUPAY","VISA","MASTER","AMEX"]),cardVariant:eO.Yj().optional(),cardNumber:eO.Yj().regex(/^\d{16}$/),expiryDate:eO.Yj().regex(/^(0[1-9]|1[0-2])\/\d{2}$/),cvv:eO.Yj().regex(/^\d{3,4}$/),cardLimit:eO.au.number().min(0),billAmount:eO.au.number().min(0),billDate:eO.Yj().refine(e=>!isNaN(Date.parse(e)),{message:"Invalid date format"}),dueDate:eO.Yj().refine(e=>!isNaN(Date.parse(e)),{message:"Invalid date format"}),birthDate:eO.Yj().optional().refine(e=>!e||!isNaN(Date.parse(e)),{message:"Invalid date format"}),cardPin:eO.Yj().optional(),appPin:eO.Yj().optional(),ifscCode:eO.Yj().optional(),statementPassword:eO.Yj().optional()}).refine(e=>e.cardLimit>=e.billAmount,{message:"Card limit cannot be less than the bill amount.",path:["cardLimit"]});function ak(e){let{isOpen:a,onClose:t}=e,{bulkAddCards:l}=eg(),{toast:n}=(0,e3.dj)(),[d,i]=(0,r.useState)(null),[c,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)(null),h=()=>{i(null),x(null),m(!1),t()};return(0,s.jsx)(ea,{open:a,onOpenChange:h,children:(0,s.jsxs)(el,{children:[(0,s.jsxs)(en,{children:[(0,s.jsx)(ei,{children:"Import Cards from CSV"}),(0,s.jsxs)(eo,{children:["Upload a CSV or Excel file to add multiple cards at once. The file must contain the following headers:",(0,s.jsx)("code",{className:"text-xs bg-muted p-1 rounded-sm",children:"cardholderName"}),", ",(0,s.jsx)("code",{className:"text-xs bg-muted p-1 rounded-sm",children:"bankName"}),", ",(0,s.jsx)("code",{className:"text-xs bg-muted p-1 rounded-sm",children:"mobileNumber"}),", ",(0,s.jsx)("code",{className:"text-xs bg-muted p-1 rounded-sm",children:"cardType"}),", ",(0,s.jsx)("code",{className:"text-xs bg-muted p-1 rounded-sm",children:"cardNumber"}),", ",(0,s.jsx)("code",{className:"text-xs bg-muted p-1 rounded-sm",children:"expiryDate"}),", ",(0,s.jsx)("code",{className:"text-xs bg-muted p-1 rounded-sm",children:"cvv"}),", ",(0,s.jsx)("code",{className:"text-xs bg-muted p-1 rounded-sm",children:"cardLimit"}),", ",(0,s.jsx)("code",{className:"text-xs bg-muted p-1 rounded-sm",children:"billAmount"}),", ",(0,s.jsx)("code",{className:"text-xs bg-muted p-1 rounded-sm",children:"billDate"}),", ",(0,s.jsx)("code",{className:"text-xs bg-muted p-1 rounded-sm",children:"dueDate"}),". All other fields are optional. Dates should be in a valid date format (e.g., YYYY-MM-DD)."]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(e_,{type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",onChange:e=>{e.target.files&&(i(e.target.files[0]),x(null))}}),u&&(0,s.jsxs)(aw,{variant:"destructive",children:[(0,s.jsx)(aC,{children:"Error"}),(0,s.jsx)(aD,{className:"whitespace-pre-wrap",children:u})]})]}),(0,s.jsxs)(ed,{children:[(0,s.jsx)(f,{variant:"outline",onClick:h,disabled:c,children:"Cancel"}),(0,s.jsxs)(f,{onClick:()=>{if(!d)return void x("Please select a file to import.");m(!0),x(null);let e=new FileReader;e.onload=e=>{try{var a;let s=null==(a=e.target)?void 0:a.result,r=ay.LF(s,{type:"binary"}),d=r.SheetNames[0],i=r.Sheets[d],o=ay.Wp.sheet_to_json(i),c=[],m=[];if(o.forEach((e,a)=>{let t=aA.safeParse(e);if(t.success){let{billDate:e,dueDate:a,birthDate:s,...r}=t.data;c.push({...r,billDate:new Date(e).toISOString(),dueDate:new Date(a).toISOString(),birthDate:s?new Date(s).toISOString():void 0})}else{let e=t.error.errors.map(e=>"".concat(e.path.join("."),": ").concat(e.message)).join(", ");m.push("Row ".concat(a+2,": ").concat(e))}}),m.length>0){x("Import failed. Please fix the following errors in your CSV and try again:\n".concat(m.slice(0,5).join("\n"))),m.length>5&&x(e=>e+"\n...and ".concat(m.length-5," more errors."));return}c.length>0?(l(c),n({title:"Import Successful",description:"".concat(c.length," card(s) have been imported successfully.")}),t()):x("No valid card data found in the file.")}catch(e){console.error(e),x("Failed to process the file. Please ensure it's a valid CSV or Excel file.")}finally{m(!1)}},e.onerror=()=>{x("Failed to read the file."),m(!1)},e.readAsBinaryString(d)},disabled:!d||c,children:[c?(0,s.jsx)(ev.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Import"]})]})]})})}var aS=t(26597),aP=t(86087),aI=t.n(aP);let aT=e=>{let a=new aS.default;a.text("Credit Card Summary Report",14,16);let t=e.map(e=>{let a=e.payments.reduce((e,a)=>e+a.amount,0),t=e.billAmount-a,s=(0,h.O)(e);return[e.cardholderName,e.bankName,"".concat(e.cardType," ").concat(e.cardVariant?"("+e.cardVariant+")":""),"...".concat(e.cardNumber.slice(-4)),(0,h.v)(e.cardLimit),(0,h.v)(e.billAmount),(0,h.v)(a),(0,h.v)(t),(0,eH.GP)(new Date(e.dueDate),"PPP"),s]});aI()(a,{head:[["Cardholder","Bank","Type","Number","Limit","Bill Amt","Paid","Due Amt","Due Date","Status"]],body:t,startY:20,styles:{fontSize:7},headStyles:{fillColor:[41,128,185]}}),e.forEach(e=>{if(e.payments.length>0){let t=a.lastAutoTable.finalY+10;t>260&&(a.addPage(),t=20),a.text("Payment History for ".concat(e.cardholderName," (...").concat(e.cardNumber.slice(-4),")"),14,t);let s=e.payments.map(e=>[(0,eH.GP)(new Date(e.date),"PPP"),e.note||"-",(0,h.v)(e.amount)]);aI()(a,{head:[["Payment Date","Note","Amount"]],body:s,startY:t+4,theme:"grid",styles:{fontSize:8},headStyles:{fillColor:[41,128,185]}})}}),a.save("card_report.pdf")},aE=e=>{let a=ay.Wp.book_new(),t=e.map(e=>{let a=e.payments.reduce((e,a)=>e+a.amount,0),t=e.billAmount-a,s=e.cardLimit-t;return{cardholderName:e.cardholderName,bankName:e.bankName,mobileNumber:e.mobileNumber,cardType:e.cardType,cardVariant:e.cardVariant,cardNumber:"'".concat(e.cardNumber),expiryDate:e.expiryDate,cvv:e.cvv,cardPin:e.cardPin,appPin:e.appPin,birthDate:e.birthDate?(0,eH.GP)(new Date(e.birthDate),"yyyy-MM-dd"):"",ifscCode:e.ifscCode,statementPassword:e.statementPassword,cardLimit:e.cardLimit,availableLimit:s,billAmount:e.billAmount,paidAmount:a,dueAmount:t,billDate:(0,eH.GP)(new Date(e.billDate),"yyyy-MM-dd"),dueDate:(0,eH.GP)(new Date(e.dueDate),"yyyy-MM-dd"),status:(0,h.O)(e)}}),s=ay.Wp.json_to_sheet(t,{header:["cardholderName","bankName","mobileNumber","cardType","cardVariant","cardNumber","expiryDate","cvv","cardLimit","availableLimit","billAmount","paidAmount","dueAmount","billDate","dueDate","status","ifscCode","statementPassword","cardPin","appPin","birthDate"]});ay.Wp.book_append_sheet(a,s,"Cards Summary"),e.forEach(e=>{if(e.payments.length>0){let t=e.payments.map(e=>({Date:(0,eH.GP)(new Date(e.date),"yyyy-MM-dd"),Amount:e.amount,Note:e.note})),s=ay.Wp.json_to_sheet(t),r="".concat(e.cardholderName.slice(0,15),"_").concat(e.cardNumber.slice(-4)).replace(/[\\/?*[\]]/g,"").slice(0,31);ay.Wp.book_append_sheet(a,s,r)}}),ay._h(a,"card_report.xlsx")},aR=()=>{let[e,a]=(0,r.useState)(!1),{cards:t,updateCard:u}=eg(),{toast:x}=(0,e3.dj)(),[p,j]=(0,r.useState)(!1),[b,N]=(0,r.useState)(void 0),[y,v]=(0,r.useState)(""),[w,C]=(0,r.useState)("grid"),[D,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{a(!0)},[]),(0,r.useEffect)(()=>{if(!e)return;let a=new Date;a.setHours(0,0,0,0);let s=new Set;t.forEach(e=>{if("paid"!==(0,h.O)(e)){let t=new Date(e.dueDate);t.setHours(0,0,0,0),t<=a&&s.add(e.id)}}),s.size>0&&x({title:"Payment Reminder",description:"You have ".concat(s.size," card(s) with payments due or overdue."),variant:"destructive"})},[t,x,e]),(0,r.useEffect)(()=>{if(!e)return;let a=new Date;a.setHours(0,0,0,0);let s=[];t.forEach(e=>{let t=(0,h.O)(e),r=new Date(e.billDate);if(r.setHours(0,0,0,0),"paid"===t&&a>=r){let t=r,l=new Date(e.dueDate);for(;a>=t;)t=(0,m.P)(t,1),l=(0,m.P)(l,1);s.push({...e,billDate:t.toISOString(),dueDate:l.toISOString(),payments:[],billAmount:0})}}),s.length>0&&(s.forEach(e=>u(e)),x({title:"Billing Cycle Updated",description:"".concat(s.length," card(s) have been rolled over to the next cycle. Please update their new bill amounts.")}))},[t,u,x,e]);let S=e=>{switch(e){case"unpaid":return 1;case"partially-paid":return 2;case"paid":return 3;default:return 4}},P=(0,r.useMemo)(()=>t.filter(e=>{let a=y.toLowerCase();return e.cardholderName.toLowerCase().includes(a)||e.mobileNumber.includes(a)||e.cardNumber.includes(a)||e.bankName.toLowerCase().includes(a)||e.cardType.toLowerCase().includes(a)||e.cardVariant&&e.cardVariant.toLowerCase().includes(a)}).sort((e,a)=>{let t=(0,h.O)(e),s=(0,h.O)(a),r=S(t),l=S(s);return r!==l?r-l:"paid"!==t?new Date(e.dueDate).getTime()-new Date(a.dueDate).getTime():e.cardholderName.localeCompare(a.cardholderName)}),[t,y]);return e?(0,s.jsxs)("div",{className:"flex min-h-screen w-full flex-col",children:[(0,s.jsx)(g,{}),(0,s.jsxs)("main",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8",children:[(0,s.jsx)(k,{cards:P}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[(0,s.jsx)("h2",{className:"text-2xl font-headline font-bold tracking-tight",children:"My Cards"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(e_,{type:"search",placeholder:"Search by name, bank, number...",className:"pl-8 sm:w-[200px] md:w-[300px]",value:y,onChange:e=>v(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 rounded-md bg-muted p-1",children:[(0,s.jsx)(f,{variant:"grid"===w?"secondary":"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>C("grid"),children:(0,s.jsx)(n.A,{className:"h-4 w-4"})}),(0,s.jsx)(f,{variant:"list"===w?"secondary":"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>C("list"),children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)(L,{children:[(0,s.jsx)(z,{asChild:!0,children:(0,s.jsxs)(f,{variant:"outline",className:"gap-1.5",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),"Export"]})}),(0,s.jsxs)(Y,{align:"end",children:[(0,s.jsx)(B,{onClick:()=>{aT(P)},children:"Export as PDF"}),(0,s.jsx)(B,{onClick:()=>{aE(P)},children:"Export as Excel"})]})]}),(0,s.jsxs)(f,{onClick:()=>A(!0),variant:"outline",className:"gap-1.5",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),"Import CSV"]}),(0,s.jsxs)(f,{onClick:()=>{N(void 0),j(!0)},className:"gap-1.5",children:[(0,s.jsx)(c.A,{className:"h-4 w-4"}),"Add New Card"]})]})]}),(0,s.jsx)(ao,{cards:P,onEdit:e=>{N(e),j(!0)},searchTerm:y,viewMode:w})]}),(0,s.jsx)(aN,{isOpen:p,onClose:()=>{j(!1),N(void 0)},card:b}),(0,s.jsx)(ak,{isOpen:D,onClose:()=>A(!1)})]}):null}},83686:()=>{},87481:(e,a,t)=>{"use strict";t.d(a,{dj:()=>u});var s=t(12115);let r=0,l=new Map,n=e=>{if(l.has(e))return;let a=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,a)},d=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},i=[],o={toasts:[]};function c(e){o=d(o,e),i.forEach(e=>{e(o)})}function m(e){let{...a}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,a]=s.useState(o);return s.useEffect(()=>(i.push(a),()=>{let e=i.indexOf(a);e>-1&&i.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var a=a=>e(e.s=a);e.O(0,[524,930,965,934,441,684,358],()=>a(32751)),_N_E=e.O()}]);